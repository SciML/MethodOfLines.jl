steps:
  - label: "Build and Deploy Documentation"
    env:
      BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET: ${BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET?}
    plugins:
      - staticfloat/cryptic#v2:
          variables:
            - DOCUMENTER_KEY="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"
      - staticfloat/ssh-agent:
          keyvars:
            - "DOCUMENTER_KEY"
      - JuliaCI/julia#v1:
          version: "1.10"
      - staticfloat/sandbox#v2:
          rootfs_url: "https://github.com/JuliaCI/rootfs-images/releases/download/v5.45/aws_uploader.x86_64.tar.gz"
          rootfs_treehash: "8f1a718279b12f889395723b856fc868a8890dfa"
          workspaces:
            # Include `/cache` so that `julia` install can properly cache its Julia downloads
            - "/cache:/cache"

    command: |
      julia --project=docs -e 'using Pkg; Pkg.develop(PackageSpec(path=pwd())); Pkg.instantiate()'
      git config user.name buildkite
      git config user.email methodoflines@buildkite.com
      julia --project=docs docs/make.jl
    agents:
      queue: "juliaecosystem"
      arch: "x86_64"
      sandbox_capable: true
